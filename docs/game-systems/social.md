# Social Systems

The System observes many players. It does not create connections between them. But it records when they choose to connect.

---

## Philosophy

Social features in Journey must balance:

1. **Accountability** - Others knowing creates commitment
2. **Competition** - Rankings drive some players
3. **Collaboration** - Shared challenges bond people
4. **Privacy** - Not everyone wants to be seen

The System's approach:
- **Never forces** social interaction
- **Records** connections players create
- **Observes** comparative performance without judgment
- **Enables** collaboration without requiring it

---

## Social Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           THE SYSTEM                                 â”‚
â”‚                     (Observes all players)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        RANKINGS                              â”‚   â”‚
â”‚  â”‚              Global Â· Regional Â· Seasonal                    â”‚   â”‚
â”‚  â”‚                   (Anonymous by default)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         GUILDS                               â”‚   â”‚
â”‚  â”‚              Small groups (3-10 members)                     â”‚   â”‚
â”‚  â”‚              Shared challenges Â· Guild ranks                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      ACCOUNTABILITY                          â”‚   â”‚
â”‚  â”‚                    1-on-1 partnerships                       â”‚   â”‚
â”‚  â”‚              See each other's daily completion               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         SHADOWS                              â”‚   â”‚
â”‚  â”‚              Anonymous comparison ghosts                     â”‚   â”‚
â”‚  â”‚              "Someone at your level completed X"             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. Shadows (Anonymous Comparisons)

The simplest social feature. No connection required.

### How It Works

The System occasionally shows anonymous data about other players:

```
SHADOW DETECTED

A player at Level 12 completed their workout at 5:47 AM today.
Their streak: 34 days.

You are Level 11.
Your last workout: 7:23 AM.
Your streak: 12 days.

The System presents data.
Interpretation is yours.
```

### Shadow Types

| Type | Trigger | Example |
|------|---------|---------|
| **Level Shadow** | Same level Â± 2 | "A Level 11 player averaged 12,400 steps this week" |
| **Streak Shadow** | Similar streak | "A player on day 30 just hit 15,000 steps" |
| **Time Shadow** | Same timezone | "47 players in your region completed morning workouts" |
| **Title Shadow** | Same title | "Another Iron Will holder maintained their streak" |

### Narrative Voice

```
OBSERVATION

The System monitors 12,847 active players.

Today:
â€¢ 2,341 completed all core quests
â€¢ 847 entered dungeons
â€¢ 12 defeated bosses

You are one data point.
Your actions determine which category.
```

### Privacy

- All shadows are anonymous
- No opt-out needed (no personal data shared)
- Creates ambient awareness without pressure

---

## 2. Accountability Partners

One-on-one connections for mutual visibility.

### Setup

```
ACCOUNTABILITY LINK REQUESTED

Player "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ" wants to share daily progress.

If you accept:
â€¢ You see their daily completion status
â€¢ They see your daily completion status
â€¢ Neither sees specific data (steps, weight, etc.)
â€¢ Either party can disconnect anytime

The System does not recommend this.
The System does not discourage this.
The decision is yours.

[ACCEPT]    [DECLINE]
```

### What Partners See

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ACCOUNTABILITY PARTNER: @mike                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  TODAY                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  Core Quests    [âœ“][âœ“][âœ“][ ]            â”‚  3/4 complete     â”‚
â”‚  â”‚  Rotating       [âœ“]                      â”‚  Done             â”‚
â”‚  â”‚  Streak         ðŸ”¥ 23 days               â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                  â”‚
â”‚  THIS WEEK                                                       â”‚
â”‚  Mon [âœ“âœ“âœ“âœ“] Tue [âœ“âœ“âœ“âœ“] Wed [âœ“âœ“âœ“Â·] Thu [Â·Â·Â·Â·]                  â”‚
â”‚                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  [Send Nudge]                        [Disconnect]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Nudges

Partners can send one "nudge" per day. It's not encouragement - it's acknowledgment:

```
NUDGE RECEIVED

Your accountability partner completed their quests.
They have observed that you have not.

The System does not transmit messages.
Only observations.
```

### Limits

- Maximum 3 accountability partners
- Cannot see specific metrics (only completion %)
- Either party can disconnect instantly
- 7-day cooldown before re-connecting with same person

---

## 3. Guilds

Small groups for shared challenges and rankings.

### Guild Structure

| Attribute | Value |
|-----------|-------|
| Size | 3-10 members |
| Creation | Level 10+ required |
| Joining | Invite only |
| Leaving | Anytime, 7-day rejoin cooldown |

### Guild Features

#### a) Guild Board

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GUILD: The Morning Protocol                                     â”‚
â”‚  Members: 6/10 Â· Rank: Silver Â· Season Points: 2,340            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  TODAY'S COMPLETION                                              â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  83% (5/6 members complete)           â”‚
â”‚                                                                  â”‚
â”‚  MEMBER STATUS                                                   â”‚
â”‚  @alex      [âœ“âœ“âœ“âœ“]  Done Â· Streak: 45                          â”‚
â”‚  @jordan    [âœ“âœ“âœ“âœ“]  Done Â· Streak: 23                          â”‚
â”‚  @sam       [âœ“âœ“âœ“Â·]  3/4  Â· Streak: 12                          â”‚
â”‚  @mike      [âœ“âœ“Â·Â·]  2/4  Â· Streak: 8                           â”‚
â”‚  @taylor    [âœ“âœ“âœ“âœ“]  Done Â· Streak: 67 ðŸ‘‘                       â”‚
â”‚  @chris     [Â·Â·Â·Â·]  0/4  Â· Streak: 0 (inactive 3 days)         â”‚
â”‚                                                                  â”‚
â”‚  GUILD CHALLENGE: Morning Dominance                              â”‚
â”‚  All members complete workout before 8am Â· Progress: 2/5 days   â”‚
â”‚  Reward: 500 XP per member                                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### b) Guild Challenges

Weekly challenges that require collective completion:

| Challenge | Requirement | Reward |
|-----------|-------------|--------|
| **United Front** | All members complete core quests same day | 200 XP each |
| **Morning Protocol** | 5 days where all complete by noon | 500 XP each |
| **Step Collective** | Guild total 500,000 steps in a week | 300 XP each |
| **Iron Week** | No member misses a day | 1000 XP each |

#### c) Guild Rankings

Guilds compete on seasonal leaderboards:

```
GUILD RANKINGS: Season 2

Rank  Guild                    Points    Streak
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1     The Dawn Collective      12,450    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
2     Iron Protocol            11,200    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
3     Morning Dominance        10,890    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
...
47    The Morning Protocol      2,340    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

### Guild Narrative

**Guild Creation**:
```
GUILD ESTABLISHED

"The Morning Protocol"

6 players have agreed to mutual observation.
The System now tracks collective performance.

Guild challenges available.
Individual progress remains individual.
The group does not carry the weak.
The weak are simply visible.
```

**Guild Challenge Complete**:
```
GUILD ACHIEVEMENT: Morning Protocol

5 consecutive days.
All members completed before 8:00 AM.

The System observes: coordination succeeded.
Reward distributed: 500 XP per member.

Individual credit remains individual.
The guild record is separate.
```

---

## 4. Leaderboards

Global and segmented rankings.

### Leaderboard Types

| Board | Metric | Reset |
|-------|--------|-------|
| **Level** | Current level | Never |
| **Streak** | Current streak days | On break |
| **Weekly XP** | XP earned this week | Weekly |
| **Seasonal** | Season points | Per season |
| **Guild** | Guild collective points | Per season |

### Display Options

Players choose their visibility:

| Setting | Effect |
|---------|--------|
| **Anonymous** | Shown as "Player #12847" |
| **Username** | Shown as "@alex" |
| **Hidden** | Not on leaderboards |

### Weekly Leaderboard

```
WEEKLY RANKINGS

Your position: #2,341 of 12,847

Top 10:
Rank  Player           XP Earned    Streak
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1     @shadowhunter    1,847        89 days
2     @ironwill_42     1,723        134 days
3     Player #7721     1,698        45 days
4     @morningprotocol 1,654        67 days
5     @discipline_sys  1,621        23 days
...

Your stats this week:
XP Earned: 847
Streak: 12 days
Core completion: 6/7 days
```

### Leaderboard Narrative

The System doesn't celebrate rankings:

```
WEEKLY RANKING: #2,341

12,846 players ranked above you.
The System does not suggest this is good or bad.

Your output this week: 847 XP
Top player output: 1,847 XP

The gap is 1,000 XP.
The gap is data.
```

---

## 5. Raid Bosses (Collaborative)

Special bosses that require multiple players.

### Raid Boss Structure

```
RAID BOSS DETECTED: The Collective Excuse

This enemy is too large for one player.

Requirements:
â€¢ 3-5 players
â€¢ All must be Level 10+
â€¢ All must have defeated "The Inconsistent One"

Mechanic: Each player must complete a personal challenge.
If any player fails, the raid fails.
There are no carries.

[FORM RAID]    [DECLINE]
```

### Raid Mechanics

| Phase | Requirement | Duration |
|-------|-------------|----------|
| **Coordination** | All raiders complete core quests | 3 days |
| **Surge** | All raiders hit 12,000 steps same day | 1 day |
| **Endurance** | No raider misses a day | 5 days |
| **Finisher** | All raiders complete bonus quest | 1 day |

If ANY raider fails ANY phase, the raid fails for everyone.

### Raid Narrative

**Raid Start**:
```
RAID INITIATED

The Collective Excuse has been engaged.
Party size: 4

This boss exploits weakness in numbers.
One failure cascades.

Phase 1: Coordination
All party members must complete core quests.
Duration: 3 days
Current: Day 1

The System observes the party.
It does not intervene.
```

**Raid Failure**:
```
RAID FAILED

The Collective Excuse survives.

Party member @â–ˆâ–ˆâ–ˆâ–ˆ failed Phase 2.
The cascade occurred.

Individual record: Raid attempted
Party record: Defeat

The boss remains.
Reform when ready.
```

**Raid Success**:
```
RAID COMPLETE

The Collective Excuse has been defeated.

10 days of collective discipline.
No member failed.

Rewards distributed:
â€¢ 500 XP per member
â€¢ Title: "Raid Survivor" (all members)
â€¢ Guild XP: +1000 (if same guild)

This victory required others.
Most victories do not.
```

---

## 6. Social Feed (Optional)

A minimal activity feed for those who want it.

### Feed Content

Only shows:
- Boss defeats
- Title unlocks
- Streak milestones (30, 60, 90, 365)
- Dungeon completions (B-rank and above)

Does NOT show:
- Daily quest completion
- XP gains
- Failures or debuffs
- Streak breaks

### Feed Display

```
SYSTEM ACTIVITY LOG

@shadowhunter defeated The Comfortable Self
2 hours ago Â· Level 18

@morningprotocol unlocked "Centurion" (100-day streak)
5 hours ago Â· Level 14

@ironwill_42 cleared S-Rank Dungeon: The Impossible Standard
8 hours ago Â· Level 22

Player #4421 defeated Raid Boss: The Collective Excuse
1 day ago Â· Party of 4
```

### Feed Settings

| Setting | Effect |
|---------|--------|
| **Show mine** | Your achievements appear in others' feeds |
| **Hide mine** | Your achievements are private |
| **View feed** | See others' achievements |
| **No feed** | Feed hidden entirely |

---

## Database Schema Additions

```typescript
// Guild
export const guilds = pgTable("guilds", {
  id: text("id").primaryKey().$defaultFn(() => createId()),
  name: text("name").notNull().unique(),
  createdBy: text("created_by").references(() => users.id).notNull(),
  createdAt: timestamp("created_at").defaultNow().notNull(),
  maxMembers: integer("max_members").default(10).notNull(),
  rank: text("rank").default("bronze").notNull(), // bronze, silver, gold, platinum
  seasonPoints: integer("season_points").default(0).notNull(),
});

// Guild Membership
export const guildMembers = pgTable("guild_members", {
  id: text("id").primaryKey().$defaultFn(() => createId()),
  guildId: text("guild_id").references(() => guilds.id).notNull(),
  userId: text("user_id").references(() => users.id).notNull(),
  role: text("role").default("member").notNull(), // leader, officer, member
  joinedAt: timestamp("joined_at").defaultNow().notNull(),
});

// Guild Challenges
export const guildChallenges = pgTable("guild_challenges", {
  id: text("id").primaryKey().$defaultFn(() => createId()),
  guildId: text("guild_id").references(() => guilds.id).notNull(),
  type: text("type").notNull(),
  startDate: date("start_date").notNull(),
  endDate: date("end_date").notNull(),
  requirement: jsonb("requirement").notNull(),
  progress: jsonb("progress").default({}).notNull(),
  status: text("status").default("active").notNull(), // active, completed, failed
  rewardXp: integer("reward_xp").notNull(),
});

// Accountability Partners
export const accountabilityPairs = pgTable("accountability_pairs", {
  id: text("id").primaryKey().$defaultFn(() => createId()),
  userA: text("user_a").references(() => users.id).notNull(),
  userB: text("user_b").references(() => users.id).notNull(),
  createdAt: timestamp("created_at").defaultNow().notNull(),
  status: text("status").default("active").notNull(), // pending, active, ended
});

// Raid Bosses
export const raids = pgTable("raids", {
  id: text("id").primaryKey().$defaultFn(() => createId()),
  bossId: text("boss_id").references(() => bosses.id).notNull(),
  status: text("status").default("forming").notNull(), // forming, active, completed, failed
  startedAt: timestamp("started_at"),
  completedAt: timestamp("completed_at"),
  currentPhase: integer("current_phase").default(1).notNull(),
});

// Raid Members
export const raidMembers = pgTable("raid_members", {
  id: text("id").primaryKey().$defaultFn(() => createId()),
  raidId: text("raid_id").references(() => raids.id).notNull(),
  userId: text("user_id").references(() => users.id).notNull(),
  joinedAt: timestamp("joined_at").defaultNow().notNull(),
  status: text("status").default("active").notNull(), // active, failed, completed
});

// Leaderboard Preferences
export const leaderboardPrefs = pgTable("leaderboard_prefs", {
  userId: text("user_id").references(() => users.id).primaryKey(),
  visibility: text("visibility").default("anonymous").notNull(), // anonymous, username, hidden
  showInFeed: boolean("show_in_feed").default(true).notNull(),
  viewFeed: boolean("view_feed").default(true).notNull(),
});
```

---

## API Endpoints

### Guild Endpoints

| Method | Path | Description |
|--------|------|-------------|
| POST | `/api/guilds` | Create guild |
| GET | `/api/guilds/:id` | Get guild details |
| POST | `/api/guilds/:id/invite` | Invite to guild |
| POST | `/api/guilds/:id/join` | Accept invite |
| DELETE | `/api/guilds/:id/leave` | Leave guild |
| GET | `/api/guilds/:id/challenges` | Get guild challenges |

### Accountability Endpoints

| Method | Path | Description |
|--------|------|-------------|
| POST | `/api/accountability/request` | Send partner request |
| POST | `/api/accountability/:id/accept` | Accept request |
| DELETE | `/api/accountability/:id` | End partnership |
| POST | `/api/accountability/:id/nudge` | Send daily nudge |

### Leaderboard Endpoints

| Method | Path | Description |
|--------|------|-------------|
| GET | `/api/leaderboards/weekly` | Weekly XP rankings |
| GET | `/api/leaderboards/streaks` | Current streak rankings |
| GET | `/api/leaderboards/level` | Level rankings |
| GET | `/api/leaderboards/guilds` | Guild rankings |
| PATCH | `/api/leaderboards/preferences` | Update visibility |

### Raid Endpoints

| Method | Path | Description |
|--------|------|-------------|
| POST | `/api/raids` | Start raid formation |
| POST | `/api/raids/:id/join` | Join raid |
| GET | `/api/raids/:id` | Get raid status |
| GET | `/api/raids/available` | List available raid bosses |

---

## Implementation Priority

| Phase | Features |
|-------|----------|
| **MVP** | Shadows (anonymous comparisons) |
| **V1** | Accountability partners, basic leaderboards |
| **V1.5** | Guilds (basic), guild challenges |
| **V2** | Raid bosses, guild rankings |
| **V2+** | Social feed, advanced guild features |

---

## Content Needed

| Key | Type | Description |
|-----|------|-------------|
| `social.shadow.*` | Narrative | Shadow observation messages (10+) |
| `social.accountability.*` | Narrative | Partner request/nudge messages (5+) |
| `social.guild.*` | Narrative | Guild creation/challenge messages (10+) |
| `social.raid.*` | Narrative | Raid boss narratives (15+ per boss) |
| `social.leaderboard.*` | Narrative | Ranking observations (10+) |

---

## Summary

Social features in Journey:

1. **Shadows** - Anonymous comparisons create ambient awareness
2. **Accountability** - Opt-in visibility with one partner
3. **Guilds** - Small groups with shared challenges
4. **Leaderboards** - Rankings without celebration
5. **Raids** - Collaborative boss fights with shared risk

The System does not build community.
It observes when players do.
